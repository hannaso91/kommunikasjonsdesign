:root{
  --paper:#f6f3ee;
  --ink:#0f0e0d;
  --ink-soft:#2f2a25;
  --accent:#6d4f2f;
  --accent2:#3a6ea5;
  --shadow-soft: 0 8px 18px rgba(0,0,0,.12);
  --shadow-page: 0 4px 12px rgba(0,0,0,.12);
  --w: min(980px, 92vw);
  --h: calc(var(--w) / 1.6);
  --radius: 12px;
  --font: 17px/1.6 Georgia, ui-serif, serif;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:radial-gradient(1200px 800px at 30% -10%, #f7f5f2 20%, #efede8 60%, #eceae6 100%); color:var(--ink);
  font: var(--font);
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

.site-header{max-width:var(--w); margin:16px auto 8px; padding:0 12px;}
.site-header h1{margin:0 0 4px 0; font-weight:700}
.site-header .sub{margin:0; color:var(--ink-soft); font-size:14px}

.stage{min-height: calc(100dvh - 80px); display:grid; place-items:center; gap:14px; padding:10px;}
.book-wrap{display:grid; place-items:center; width:100%;}
.book{
  position:relative;
  width:var(--w);
  height:var(--h);
  perspective: 2200px;
  filter: drop-shadow(var(--shadow-soft));
  user-select:none;
}

.book.hardcover::before{
  content:""; position:absolute; left:calc(50% - 10px); top:10px; bottom:10px; width:20px;
  background:linear-gradient(90deg, rgba(0,0,0,.18), rgba(255,255,255,.1) 50%, rgba(0,0,0,.18));
  border-radius: 8px;
  pointer-events:none; opacity:.35;
}
.book.hardcover::after{
  content:""; position:absolute; inset:-10px; border-radius:18px;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.06), inset 0 8px 18px rgba(0,0,0,.06);
  pointer-events:none;
}

.page{
  position:absolute; top:0; bottom:0;
  width:50%; padding:26px clamp(16px,1.8vw,26px);
  background:
    linear-gradient(180deg, #faf7f2, #f3efe9),
    repeating-linear-gradient(0deg, #0000, #0000 11px, rgba(0,0,0,.02) 12px, #0000 13px);
  border-radius:var(--radius);
  box-shadow: var(--shadow-page);
  transform-style: preserve-3d;
  will-change: transform;
  transition: transform .6s cubic-bezier(.2,.6,.2,1);
}
.page::after{
  content:""; position:absolute; top:6px; bottom:6px; right:-6px; width:6px; border-radius:0 8px 8px 0;
  background: repeating-linear-gradient(180deg, #e7e2db, #e7e2db 3px, #dfd9d0 3px, #dfd9d0 6px);
  box-shadow: 2px 0 6px rgba(0,0,0,.08);
}
.page .inner{
  height:100%; display:flex; flex-direction:column; gap:14px;
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: visible;
}
.page .figure img{width:100%; height:auto; border-radius:10px; display:block}
.page .figure figcaption{font-size:13px; color:var(--ink-soft)}

.figure_portrait img{width:40%; height:auto; border-radius:10px; display:block}
    figcaption {
      font-size: 13px;
      color: var(--ink-soft)
    }

.page--right{right:0; transform-origin: left center;}
.page--left{left:0; transform-origin: right center;}

.page::before{ content:""; position:absolute; inset:0; pointer-events:none; border-radius:var(--radius);
  background: radial-gradient(140% 120% at 100% 50%, rgba(0,0,0,.14), transparent 55%); opacity:0; transition: opacity .25s ease; }
.page.dragging::before{ opacity:.2; }

.page.flipped{ transform: rotateY(-180deg); z-index: 1; }
.page.flipped .inner{ transform: rotateY(180deg) translateZ(0); }

h2.title{font-size:42px; letter-spacing:.08em; margin:.2em 0 .1em}
h3{margin:.2em 0 .1em; color:var(--accent)}
.lead, .strap{color:var(--ink-soft)}

.cover .inner{display:grid; place-items:center;}
.cover .cover-art{
  width:80%; height:80%; border-radius:14px;
  background: radial-gradient(800px 400px at 40% 20%, rgba(255,255,255,.5), rgba(255,255,255,.08) 50%, rgba(0,0,0,.06)),
              linear-gradient(135deg, #6b5438, #3c2a1a 60%);
  box-shadow: inset 0 0 0 3px rgba(255,255,255,.15), inset 0 8px 18px rgba(0,0,0,.25);
  color:#f4ede2; text-align:center; padding:24px 20px;
  display:flex; flex-direction:column; justify-content:center; gap:10px;
}
.cover .title{font-size:48px; letter-spacing:.1em;}
.cover .strap{font-size:18px;}
.cover .byline{opacity:.9}
.cover .ornament{height:2px; width:60%; margin:8px auto; background:linear-gradient(90deg, transparent, #f1e8d9, transparent); opacity:.9}
.cover.back .colophon{color:#f4ede2; opacity:.9;}

.controls{display:flex; gap:10px; align-items:center}
.btn{appearance:none; border:0; background:var(--paper); padding:.6rem .9rem; border-radius:10px; box-shadow: var(--shadow-page); cursor:pointer}
.status{margin-left:6px; color:var(--ink-soft)}

@media (max-width: 800px){
  :root{ --w: min(94vw, 540px); --h: calc(var(--w) * 1.35); }
  .book.hardcover::before{ left:auto; right:12px; width:10px; opacity:.28; }
  .book.hardcover::after{ inset:-8px; border-radius:16px; }
  .book.single .page{ width:100%; right:0; left:0; transform-origin: right center; }
  .book.single .page.is-hidden{ display:none; }
  .controls{ position:sticky; bottom:8px; }
}
